<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>VPS - 某储备粮的“学习笔记”</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- 使用url函数转换相关路径 -->
<link rel="stylesheet" type="text/css" media="all" href="http://blog.gregwym.info/usr/themes/trapecho/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" media="all" href="http://blog.gregwym.info/usr/themes/trapecho/css/bootstrap-responsive.min.css" />
<link rel="stylesheet" type="text/css" media="all" href="http://blog.gregwym.info/usr/themes/trapecho/style.css" />
<link rel="stylesheet" type="text/css" media="all" href="http://blog.gregwym.info/usr/themes/trapecho/css/prettify.css" />

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Le fav and touch icons -->
<link rel="shortcut icon" href="http://blog.gregwym.info/tag/VPS/1/images/favicon.ico">
<link rel="apple-touch-icon" href="http://blog.gregwym.info/tag/VPS/1/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="http://blog.gregwym.info/tag/VPS/1/images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="http://blog.gregwym.info/tag/VPS/1/images/apple-touch-icon-114x114.png">

<!-- 通过自有函数输出HTML头部信息 -->
<meta name="keywords" content="VPS" />
<meta name="generator" content="Typecho 0.9/13.12.12" />
<meta name="template" content="trapecho" />
<link rel="pingback" href="../../../action/xmlrpc.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../action/xmlrpc%3Frsd.html" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../action/xmlrpc%3Fwlw.html" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="../../../feed/tag/VPS/index.html" />
<link rel="alternate" type="application/rdf+xml" title="RSS 1.0" href="../../../feed/rss/tag/VPS/index.html" />
<link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="../../../feed/atom/tag/VPS/index.html" />
</head>

<body onload="prettyPrint()">

<div class="container">

<header class="jumbotron" id="overview">
        <h1>某储备粮的“学习笔记” </h1>
    <p class="lead">by 咳嗽di小鱼</p>

    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                
                <a class="brand" href="../../../index.html">
                    Trapecho
                </a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li><a href="../../../index.html">Home</a></li>
                        <li class="divider-vertical"></li>
                                                                        <li><a href="../../../category/sum-up/index.html" title="Sum Up">Sum Up</a></li>
                                                <li><a href="../../../category/code-dump/index.html" title="Code Dump">Code Dump</a></li>
                                                <li><a href="../../../category/network/index.html" title="Network">Network</a></li>
                                                <li><a href="../../../category/jotting/index.html" title="Jotting">Jotting</a></li>
                                                <li><a href="../../../category/Portfolio/index.html" title="Portfolio">Portfolio</a></li>
                                                <li class="divider-vertical"></li>
                                                                        <li><a href="../../../linked-in.html" title="Linked In">Linked In</a></li>
                                                <li><a href="../../../guess-book.html" title="Guest Book">Guest Book</a></li>
                                                <li><a href="../../../about.html" title="About">About</a></li>
                                                <li><a href="../../../rss.html" title="RSS">RSS</a></li>
                                            </ul>
                </div><!--/.nav-collapse -->
            </div>
        </div>
    </div>
</header>

<div class="content">


<div class="row">
    <div class="span9" id="content">
                        <div class="post">
            <div class="page-header">
                <h1>
                    <a href="../../../linux-de-yong-hu--user--he-yong-hu-zu--group--guan-li.html">Linux的用户(user)和用户组(group)管理</a> 
                    <small></small>
                </h1>
                <h6>
                    <span>Author: 咳嗽di小鱼</span>
                    <span>Date: June 4, 2011</span>
                    <span>Category: <a href="../../../category/network/index.html">Network</a></span>
                    <a href="../../../linux-de-yong-hu--user--he-yong-hu-zu--group--guan-li.html#comments">3 Comments</a>
                </h6>
            </div>
            <div class="entry-content"><p>Linux的多用户权限管理还是很强大的...熟悉了各种命令之后, 对每一个用户的权利可以说是操控自如.</p><h3>用户(user)和用户组(group)相关的配置文件、命令或目录</h3><ul>
<li>/etc/passwd 用户配置文件</li>
<li>/etc/shadow 用户密码影子文件</li>
<li>/etc/group 用户组配置文件</li>
<li>/etc/gshadow 用户组配置影子文件</li>
</ul><p></p><p class="more"><a href="../../../linux-de-yong-hu--user--he-yong-hu-zu--group--guan-li.html" title="Linux的用户(user)和用户组(group)管理">Read more...</a></p></div>
        </div>
        <hr class="soften" />
                <div class="post">
            <div class="page-header">
                <h1>
                    <a href="../../../quickweb-openvz-an-zhuang-pptp-vpn-shi-jian-bi-ji---bu-yong-mppe.html">Quickweb OpenVZ安装PPTP VPN实践笔记(不用MPPE)</a> 
                    <small></small>
                </h1>
                <h6>
                    <span>Author: 咳嗽di小鱼</span>
                    <span>Date: April 22, 2011</span>
                    <span>Category: <a href="../../../category/network/index.html">Network</a></span>
                    <a href="../../../quickweb-openvz-an-zhuang-pptp-vpn-shi-jian-bi-ji---bu-yong-mppe.html#comments">7 Comments</a>
                </h6>
            </div>
            <div class="entry-content"><p>从回国之前, 一直倒腾到家`可算是把VPN搭好了...<br />OpenVZ的VPS在内核这块实在是缺少自由, 如果是Xen这次就不会这么复杂了.<br />废话少说.</p><p>基本过程和网上其他的教程都差不多, 主要在于加密和ipforward的配置.</p><ol>
<li><p>安装ppp和iptables</p><br />
<br />
<pre><code>yum install -y ppp iptables
</code></pre></li>
<li><p>安装pptpd</p><br />
<br />
<pre><code>wget http://poptop.sourceforge.net/yum/stable/packages/pptpd-1.3.4-2.rhel5.i386.rpm 
rpm -ivh pptpd-1.3.4-2.rhel5.i386.rpm 
</code></pre></li>
</ol><p></p><p class="more"><a href="../../../quickweb-openvz-an-zhuang-pptp-vpn-shi-jian-bi-ji---bu-yong-mppe.html" title="Quickweb OpenVZ安装PPTP VPN实践笔记(不用MPPE)">Read more...</a></p></div>
        </div>
        <hr class="soften" />
                <div class="post">
            <div class="page-header">
                <h1>
                    <a href="../../../linux-fu-wu-qi-`-zi-dong-bei-fen-shu-ju-ku---wang-ye-dao-you-xiang.html">linux服务器`自动备份数据库+网页到邮箱</a> 
                    <small></small>
                </h1>
                <h6>
                    <span>Author: 咳嗽di小鱼</span>
                    <span>Date: April 4, 2011</span>
                    <span>Category: <a href="../../../category/network/index.html">Network</a></span>
                    <a href="../../../linux-fu-wu-qi-`-zi-dong-bei-fen-shu-ju-ku---wang-ye-dao-you-xiang.html#comments">1 Comment</a>
                </h6>
            </div>
            <div class="entry-content"><p>我的QQ邮箱现在已经有3T容量了...<br />原来玩WordPress的时候其实就一直拿来做数据库备份, 现在容量变大几倍有余, 自然是备份的不二选择. 这可比<a href="https://www.fdcservers.net/order-1.php?plan_id=358">FDC的大容量VPS</a>划算多了, 特别是当你的网站并没有多大的时候. (书苑现在的数据库也都还没有1G...)</p><p>这个脚本来自<a href="http://www.vpsmm.com/edu/everyday-auto-backup-linux-vps.html">小夜博客</a>, 经我略加修改了一下.<br />下载: <a href="http://blog.gregwym.info/usr/uploads/2011/04/259619282.sh" title="backup_to_mail.sh">backup&#95;to&#95;mail.sh</a></p><p><hr /></p><p>很简单的一段bash script, 只需要自定义下mysql的用户名密码, 邮箱地址和要备份的目录.</p><p>然后进行下边的步骤:</p><p>首先要建立好放置备份文件的目录</p><pre><code>mkdir /home/backup
</code></pre><p>然后安装发送邮件的程序</p><pre><code>yum install sendmail mutt
</code></pre><p>把backup&#95;to&#95;mail.sh放到刚刚建立的目录中, 然后给脚本增加运行权限</p><pre><code>chmod a+x /home/backup/backup_to_mail.sh
</code></pre><p>最后一步是设置定时运行, 输入</p><pre><code>crontab -e
</code></pre><p>然后在vi编辑界面中加入下面这行文字</p><pre><code>00 00 * * * /home/backup/backup_to_mail.sh
</code></pre><p>:x + enter就ok了.</p><p>其中00 00表示在每日00分, 00点的时候运行该脚本.</p><p>下边是脚本的内容, 以备附件失效和以后学习...</p><pre><code>#!/bin/bash
MYSQL_USER=root                             #mysql username
MYSQL_PASS=***********                      #mysql password
MAIL_TO=*******@***.**                      #mailling to
WEB_DATA=/home/wwwroot/                     #to be backup dir

#define variables
DataBakName=Data_$(date +%Y%m%d).tar.gz
WebBakName=Web_$(date +%Y%m%d).tar.gz
OldData=Data_$(date -d -3day +%Y%m%d).tar.gz
OldWeb=Web_$(date -d -3day +%Y%m%d).tar.gz
DataSubject="Backup: gregwym.info database "$(date +%Y%m%d)
WebSubject="Backup: gregwym.info web dir "$(date +%Y%m%d)

#delete data from 3days earlier
rm -rf /home/backup/$OldData /home/backup/$OldWeb
cd /home/backup

#export database to compressed gz files
for db in `/usr/local/mysql/bin/mysql -u$MYSQL_USER -p$MYSQL_PASS -B -N -e 'SHOW DATABASES' | xargs`; do
    (/usr/local/mysql/bin/mysqldump --single-transaction -u$MYSQL_USER -p$MYSQL_PASS ${db} | gzip -9 - &gt; ${db}.sql.gz)
done

#compress database files
tar zcf /home/backup/$DataBakName /home/backup/*.sql.gz
rm -rf /home/backup/*.sql.gz
#mail database
echo $DataSubject | mutt -a /home/backup/$DataBakName -s "${DataSubject}" $MAIL_TO

#compress backup dir
tar zcf /home/backup/$WebBakName $WEB_DATA
#mail dir
echo $WebSubject | mutt -a /home/backup/$WebBakName -s "${WebSubject}" $MAIL_TO

echo "bye"
#END
</code></pre><p>如果不希望备份网页文件, 或者希望数据库和网页分别备份的, 可以自行拆分脚本为两个文件.</p><p>如果只是想降低备份网页文件的频率, 可以将#mail dir部分替换为:</p><pre><code>if [ $(date +%A) = "Sunday" ]; then 
    echo $WebSubject | mutt -a /home/backup/$WebBakName -s "${WebSubject}" $MAIL_TO 
fi
</code></pre></div>
        </div>
        <hr class="soften" />
                <div class="post">
            <div class="page-header">
                <h1>
                    <a href="../../../shuo-shuo-typecho`.html">说说Typecho`</a> 
                    <small></small>
                </h1>
                <h6>
                    <span>Author: 咳嗽di小鱼</span>
                    <span>Date: April 3, 2011</span>
                    <span>Category: <a href="../../../category/network/index.html">Network</a></span>
                    <a href="../../../shuo-shuo-typecho`.html#comments">2 Comments</a>
                </h6>
            </div>
            <div class="entry-content"><p>弄完最后的物理作业本想接着把STAT也搞定`可看看有8页之多...还是先睡一觉再说吧, 这两天时差又乱套了, 要调回来.<br />距离12点还有点时间, 换换脑子随便写点东西...</p><p>高中的时候就折腾过WordPress, 借朋友的空间搭了个小博`写了两句就没兴致继续下去了. 大部分时间都花在了研究各种插件上边. 但不知道为什么, WordPress一直就没有让我有强烈的归属感. 虽然它插件很多, 主题很多, 能高度定制化...可都少了点什么.</p><p>啊`是他太乱了...</p><p>添加了各种杂七杂八的插件以后, 单侧栏恐怕都塞不下了, 再配上本就没什么几篇的博文列表, 整个页面显得臃肿杂乱`主次颠倒, 自然也就没有了继续下去的动力.<br />虽然这算是我自己的客观因素...但WordPress越长越肥, 功能繁多却不实用的现状是毋庸置疑的.</p><p><hr /></p><p>不记得到底是先注意到Typecho, 还是先动了玩VPS的主意, 反正这俩分不开. 在某博看到Typecho的介绍和他简洁的风格时就决定了我肯定要抛弃WordPress了.</p><p>他实在太简单了...</p><ul>
<li>安装只要填写管理员, 站点信息和数据库配置就万事大吉, 一步到位.</li>
<li>一个博客需要的东西, 五脏俱全. 在添加了代码加亮, 博客友联等几个常用插件之后, 可以直接开拔.</li>
<li>后台就是简简单单的内容+评论管理, 和外观设定.</li>
<li>主题导入后, 自己调整些零碎也很得心应手.</li>
<li>数据库一共只有6张表.</li>
<li>主题文件只分, 头&#96;脚&#96;内容&#96;评论&#96;侧栏`列表...外加一张style-sheet. 从头到脚透露这简单的概念.</li>
</ul><p>按Typecho官方说法, 一个完全重写的全新后台系统正在开发中, 实在是非常期待.<br />有想法要好好学习下Typecho的源码, 不过还是先考完试再说吧.</p><p>附个在别处看到的相关短文, 深以为然:</p><blockquote><p><a href="http://www.sinzi.org/start-typecho/">为什么放弃Wordpress使用Typecho?</a></p></blockquote><p>时间差不多了...睡觉睡觉`</p></div>
        </div>
        <hr class="soften" />
                <div class="post">
            <div class="page-header">
                <h1>
                    <a href="../../../guo-duan-huan-vps-zhe-hui-shi-quickweb.html">果断换VPS...这回是QuickWeb</a> 
                    <small></small>
                </h1>
                <h6>
                    <span>Author: 咳嗽di小鱼</span>
                    <span>Date: April 2, 2011</span>
                    <span>Category: <a href="../../../category/jotting/index.html">Jotting</a></span>
                    <a href="../../../guo-duan-huan-vps-zhe-hui-shi-quickweb.html#comments">5 Comments</a>
                </h6>
            </div>
            <div class="entry-content"><p>Hostrail实在是不给力...`CPU不灵, 装lnmp慢的一塌糊涂, 好不容易Setup好, 各种问题层出不穷.<br /><ul>
<li>HyperVM Panel时不时无法访问, 即使可以访问也慢得要死</li>
<li>html页的速度倒还不错, 可Typecho这么轻量化的php应用都慢的不成样子</li>
<li>从3.29到4.1这段时间, server至少down了两次, 而且都是长时间的</li>
<li>外加各种不确定性重启...</li>
</ul><br />
悲催的不是一点两点= =||`<br />买的时候抱着随便玩玩的心理也就没仔细研究, 之后才看明白VPS是怎么一潭深水.<br /><br />这两天好好的查了下VPS的相关信息, 留下这么几个性价比高, 又比较靠谱的ISP:<br />VPSYOU, YardVPS, Ramhost, QuickWeb<br /><ul>
<li>VPSYOU价格中等, OpenVZ 256m的版本$4/m, CPU是745x2, 硬盘20G.</li>
<li>YardVPS的OpenVZ口碑不太好, 但他的Xen据说硬盘速度超一流, 512m 1.5T流量, $7.95/m. <br />
不过很少有货, 我看到有一个但因为犹豫不决miss掉了.</li>
<li>Ramhost是口碑最好的一个. 所有信息都只有夸没有贬, 只是一直没货, 而且256m要$8.99/m.<br />
(Ramhost每周末会补货, 要注意刷网页)</li>
<li>QuickWeb在网站上post出来的plan的性价比不是很高, 最低的OpenVZ/Xen都要$9.95/m. <br />
有个<a target="_blank" href="http://quickweb.co.nz/chinese">Chinese Promo</a>还可以, Texas机房的256mOpenVZ要$5.5/m, 不过好像也是out of stock.</li>
</ul><p>最后来介绍下我的最终选择:<br />QuickWeb一开始并不在我的选择范围内, 甚至根本不知道这个ISP, 因为几个大的VPS博客都没有特别推荐过这个ISP. 后来在<a target="_blank" href="http://neal.im/">Neal的博客</a>发现他在做<a target="_blank" href="http://neal.im/webhosting/">QuickWeb的代购</a>, 才发现这也是一家在美国蛮有实力的IPS. (之所以说有实力是因为他们在美国五个大的数据中心都有机房)<br />最后入手的这个是$35.88/年的plan, 平摊下来一月只要$3, Neal主推的就是这个plan.<br />他自己的blog就搭在这个plan的VPS上, 访问速度很好, 而且看底下评论的反响普遍不错, 经Google四处查证以后, 决定还是下手试试看. Paypal付款给Neal以后, 主机即时开通.<br /><br />规格:<br />OpenVZ/SolusVM<br />Intel(R) Xeon(R) CPU X3440 @ 2.53GHz, 单核<br />256M/384M突发<br />10G硬盘, 速度测试平均22M/s<br />美国凤凰城机房10Mbit带宽(Phoenix/LA) 250G/m流量<br />+$5可升级100Mbit<br />+$10可升级1000Mbit<br /><br />到目前为止, 对这个主机还是很满意的, 速度和性能方面都很不错. LNMP只用了20分钟就装好了.<br />有需求的朋友可以联系Neal代购, <a target="_blank" href="http://neal.im/webhosting/">http://neal.im/webhosting/</a><br /></p></div>
        </div>
        <hr class="soften" />
                
        <div class="pagination">
            <ol class="page-navigator"><li class="current"><a href="index.html">1</a></li><li><a href="../2/index.html">2</a></li><li><a class="next" href="../2/index.html">&raquo;</a></li></ol>        </div>
    </div><!-- end #content-->
    <div class="span3" id="sidebar">
    <div class="widget_search">
        <form method="post" id="searchform" class="form-search">
            <input type="text" class="span2" name="s" id="s" />
            <button type="submit" class="btn" id="searchsubmit">Search</button>
        </form>
    </div>
    
        
    
    
        <div class="widget">
        <h3>Recent Comments</h3>
        <ul>
                                    <li><a href="../../../github-you-should-have-told-me-earlier.html#comment-952">payday loans</a>: wfxqtdq</li>
                        <li><a href="../../../Trapecho-boostrap-based-typecho-theme.html#comment-936">地铁线路图网</a>: 我也在用typecho，小巧玲珑，稍微改了以下默认模板，站现在简洁速度也不错，点击我的昵称可以访问。</li>
                        <li><a href="../../../about.html#comment-930">ramble</a>: 博客 ，请问如何显示显示文章前3段的摘要  不打乱格式</li>
                        <li><a href="../../../about.html#comment-874">清源</a>: 看来暂时只能看着用了，google的高亮的比较不明显。</li>
                        <li><a href="../../../about.html#comment-870">清源</a>: 大哥呀，主题这几天我看着感觉用中文书写标题字体太大了，正文的字体也太小了，估计还是适合用英文，不知道...</li>
                    </ul>
    </div>
        
        <div class="widget">
    		<h3>Labels</h3>
        <ul>
                                    <a href="../../algorithm/index.html" class="size-20">algorithm</a>
                        <a href="../../review/index.html" class="size-20">review</a>
                        <a href="../../cs240/index.html" class="size-10">cs240</a>
                        <a href="../../server/index.html" class="size-10">server</a>
                        <a href="../index.html" class="size-10">VPS</a>
                        <a href="../../code/index.html" class="size-5">code</a>
                        <a href="../../database/index.html" class="size-5">database</a>
                        <a href="../../cs348/index.html" class="size-5">cs348</a>
                        <a href="../../typecho/index.html" class="size-5">typecho</a>
                        <a href="../../nginx/index.html" class="size-5">nginx</a>
                        <a href="../../search/index.html" class="size-5">search</a>
                        <a href="../../GUI/index.html" class="size-5">GUI</a>
                        <a href="../../linux/index.html" class="size-5">linux</a>
                        <a href="../../java/index.html" class="size-5">java</a>
                        <a href="../../DNS/index.html" class="size-5">DNS</a>
                        <a href="../../blog/index.html" class="size-5">blog</a>
                        <a href="../../apple/index.html" class="size-5">apple</a>
                        <a href="../../cs241/index.html" class="size-5">cs241</a>
                        <a href="../../compiler/index.html" class="size-5">compiler</a>
                        <a href="../../sql/index.html" class="size-5">sql</a>
                    </ul>
		</div>
    
    
        <div class="widget">
        <h3>Archives</h3>
        <ul>
            <li><a href="../../../2013/09/index.html">September 2013</a></li>
<li><a href="../../../2012/12/index.html">December 2012</a></li>
<li><a href="../../../2012/11/index.html">November 2012</a></li>
<li><a href="../../../2012/08/index.html">August 2012</a></li>
<li><a href="../../../2012/06/index.html">June 2012</a></li>
<li><a href="../../../2012/04/index.html">April 2012</a></li>
<li><a href="../../../2012/03/index.html">March 2012</a></li>
<li><a href="../../../2012/02/index.html">February 2012</a></li>
<li><a href="../../../2011/12/index.html">December 2011</a></li>
<li><a href="../../../2011/11/index.html">November 2011</a></li>
<li><a href="../../../2011/10/index.html">October 2011</a></li>
<li><a href="../../../2011/06/index.html">June 2011</a></li>
<li><a href="../../../2011/05/index.html">May 2011</a></li>
<li><a href="../../../2011/04/index.html">April 2011</a></li>
<li><a href="../../../2011/03/index.html">March 2011</a></li>
        </ul>
    </div>
    
    
        <div class="widget">
        <h3>Others</h3>
        <ul>
                        <li class="last"><a href="http://blog.gregwym.info/admin/login.php">Login</a></li>
                        <li><a href="http://validator.w3.org/check/referer">Valid XHTML</a></li>
        </ul>
    </div>
    
    </div><!-- end #sidebar -->
    
</div>
<footer>
    <p>
        Powered by <a href="http://typecho.org/">Typecho</a>. 
        <a href="http://dolast.com/pages/trapecho">Trapecho</a> theme by <a href="../../../index.html">咳嗽di小鱼</a>. 
        Hosting on <a href="https://www.digitalocean.com/?refcode=b846692d6a3a">Digital Ocean</a>
    </p>
</footer><!-- end #footer -->

</div>
</div>

<script src="http://blog.gregwym.info/usr/themes/trapecho/js/jquery-1.7.1.min.js"></script>
<script src="http://blog.gregwym.info/usr/themes/trapecho/js/bootstrap.min.js"></script>
<script src="http://blog.gregwym.info/usr/themes/trapecho/js/prettify.js"></script>
<script type="text/javascript">
    // fix navbar on scroll
    var $win = $(window)
      , $nav = $('.navbar')
      , navTop = $('.navbar').length && $('.navbar').offset().top - 10
      , isFixed = 0

    processScroll()

    $win.on('scroll', processScroll)

    function processScroll() {
      var i, scrollTop = $win.scrollTop()
      if (scrollTop >= navTop && !isFixed) {
        isFixed = 1
        $nav.addClass('navbar-fixed-top')
      } else if (scrollTop <= navTop && isFixed) {
        isFixed = 0
        $nav.removeClass('navbar-fixed-top')
      }
    }
    
    $('.page-navigator li:not(:has(a))').html('<a>...</a>');
    $('.page-navigator .current').addClass('active');
    
        $('pre').addClass('prettyprint linenums');
        $('.entry-content a').attr('target','_blank');
</script>
</body>
</html>